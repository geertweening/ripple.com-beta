(function(){function v(e,t){return'<span class="val"><span class="'+typeof e+(t?' editable" contenteditable="true"':'"')+' spellcheck="false">'+JSON.stringify(e)+"</span></span>"}function m(e,t){function n(e){var r=Array.isArray(e),i=Object.keys(e),s=d[r?"open_bracket":"open_brace"],o=d[r?"close_bracket":"close_brace"],u=s;return i.forEach(function(s,o){var a=e[s],f='<span contenteditable="true" class="field editable'+(r?' hidden">'+s:'">'+JSON.stringify(s))+"</span>";u+='<div class="key">'+f,r||(u+=d.colon),typeof a=="object"&&a?u+=n(a):u+=v(a,t&&s!=="id"),i[o+1]&&(u+=d.comma),u+="</div>"}),u+=o,u}return typeof t!="boolean"&&(t=!0),n(e)}function g(e,t){var t=t||[],n=$(e).parent("div.key");return n.length?(t.push($(n).children(".field").text().replace(/"/g,"")),g(n,t)):t}function y(e,t,n){var r=t.length;while(--r>0)e=e[t[r]];return e[t[r]]=n,e}function b(e,t){var n=t.length;while(--n>0)e=e[t[n]];return e[t[n]]}function w(){return w._c}function x(e,t){var n={id:void 0,name:e,message:{command:e}};return Object.keys(t||{}).forEach(function(e){e[0]==="_"?n[e]=t[e]:n.message[e]=t[e]}),S[e]=n,n}function C(e){if(typeof e=="string")var e=JSON.parse(e);var t={};return e.id&&(t.id=e.id),e.command&&(t.command=e.command),e.status&&(t.status=e.status),e.type&&(t.type=e.type),Object.keys(e).forEach(function(n){t.hasOwnProperty(n)||(t[n]=e[n])}),t}function k(e){var t=e.message;e._description?$(u).text(e._description).show():$(u).hide(),$("#selected_command").text(e.name);var n=$('<div class="json">').html(m(t));$(c).html(n)}function A(t){var n=C(t),r=$('<div class="json">');CodeMirror(r[0],{value:JSON.stringify(n),mode:"javascript",json:!0});if(n.id===w._c){var i='<span class="request_name">'+E.name;0/0;var s='<span class="timestamp">'+(Date.now()-E.t)+"ms"+"</span>";$(e).removeClass("depressed"),$(p).html(i+s),$(r).addClass("result"),$(l).removeClass(),$(l).addClass(n.error?"error":"success"),$(l).html(r),++w._c}else!L&&n.type!=="response"&&($(r).addClass("status"),$(h).prepend(r))}function O(e){E=S[e],E.message.id=w(),E.message=C(E.message),k(E)}function _(e){return e.length===0||/^(undefined|void\(0\)|void 0)$/.test(e)}function D(){var e=$(this).text().trim(),t=!0;try{var n=_(e)?void 0:JSON.parse(e)}catch(r){t=!1}if(!t)return $("#invalid").show();var i=g($(this).parent()),s=b(E.message,i);n!==s&&($(this).text(e),y(E.message,i,n),O(E.name))}function P(e){var t=Array.isArray(e),n=t?[]:{};Object.keys(e).forEach(function(t){var r=e[t];switch(typeof r){case"undefined":break;case"object":n[t]=P(r);break;default:n[t]=r}}),t&&(n=n.filter(function(e){return e!==null&&typeof e!="undefined"}));var r=t&&n.length===0;return r?void 0:n}function I(){return"property_"+Math.random().toString(10).slice(2,4)}function q(){var e=g(this),t=b(E.message,e);Array.isArray(t)?(t.push(void 0),y(E.message,e,t)):typeof t=="object"?(t[I()]=void 0,y(E.message,e,t)):E.message[I()]=void 0,O(E.name)}function z(e){var e=e.toLowerCase();$(t).removeClass(),$(t).addClass(e),$(t).text(e)}function X(){w._c=W._get_server()._id,W._get_server().on("message",A),$(e).click(function(){$(this).addClass("depressed"),$(l).addClass("obscured");var e=W.request_server_info();e.message=P(E.message),e.request(),E.t=Date.now()}),$(e).removeClass("obscured")}var e=$("#request_button"),t=$("#online_state"),n=$("#command_wrapper"),r=$(n).find("#command_list"),i=$(r).find("li"),s=$(n).find("#command_table"),o=$(n).find("#input"),u=$(o).find("#description"),a=$(o).find("#options"),f=$(n).find("#output"),l=$(n).find("#response"),c=$(n).find("#request"),h=$(n).find("#status"),p=$(n).find("#info"),d={open_brace:'<span class="brace open">{</span>',close_brace:'<span class="brace close">}</span>',open_bracket:'<span class="bracket open">[</span>',close_bracket:'<span class="bracket close">]</span>',comma:'<span class="comma">,</span>',colon:'<span class="colon">:</span>'};w._c=2;var E={},S={};$(i).each(function(e,t){S[$(t).text()]=0});var T="r9cZA1mLK5R5Am25ArfXFmqgNwjZgnfk59",N="E08D6E9754025BA2534A78707605E0601F03ACE063687A0CA1BDDACFCD1698C7";x("server_info",{_description:"Returns information about the state of the server for human consumption. Results are subject to change without notice."}),x("server_state",{_description:"Returns information about the state of the server for machine consumption."}),x("ping",{_description:"This command is used to check connectivity for clients. Websocket clients can use this to determine turn around time and actively discover loss of connectivity to a server."}),x("subscribe",{accounts:[],streams:["server","ledger"],_description:"Start receiving selected streams from the server."}),x("unsubscribe",{accounts:[],streams:["server","ledger"],_description:"Stop receiving selected streams from the server."}),x("ledger",{ledger_index:void 0,ledger_hash:void 0,full:!1,expand:!1,transactions:!0,accounts:!0,_description:"Returns ledger information."}),x("ledger_entry",{type:"account_root",account_root:T,ledger_hash:"validated",ledger_index:void 0,_description:"Returns a ledger entry. For untrusted servers, the index option provides raw access to ledger entries and proof."}),x("ledger_closed",{_description:"Returns the most recent closed ledger index. If a validation list has been provided, then validations should be available."}),x("ledger_current",{_description:"Returns the current proposed ledger index. Proof is not possible for the current ledger. This command is primarily useful for testing."}),x("account_info",{account:T,_description:"Returns information about the specified account."}),x("account_lines",{account:T,account_index:void 0,ledger:"current",_description:"Returns information about the ripple credit lines for the specified account."}),x("account_offers",{account:T,account_index:void 0,ledger:"current",_description:"Returns the outstanding offers for a specified account."}),x("account_tx",{account:T,ledger_index_min:-1,ledger_index_max:-1,binary:!1,count:!1,descending:!1,offset:0,limit:10,forward:!1,marker:void 0,_description:"Returns a list of transactions that applied to a specified account."}),x("transaction_entry",{tx_hash:N,ledger_index:2438581,ledger_hash:void 0,_description:"Returns information about a specified transaction."}),x("tx",{transaction:N,_description:"Returns information about a specified transaction."}),x("tx_history",{start:10,_description:"Returns the last N transactions starting from start index, in descending order, by ledger sequence number. Server sets N."}),x("book_offers",{ledger_hash:void 0,ledger_index:void 0,taker:T,taker_gets:ripple.Amount.from_json("1/EUR/rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B").to_json(),taker_pays:ripple.Amount.from_json("1/USD/rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B").to_json(),_description:"Returns the offers for an order book as one or more pages."}),x("path_find",{subcommand:"create",source_account:T,destination_account:"r9cZA1mLK5R5Am25ArfXFmqgNwjZgnfk59",destination_amount:ripple.Amount.from_json("0.001/USD/rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B").to_json(),_description:"Find or modify a payment pathway between specified accounts."}),x("ripple_path_find",{ledger_hash:void 0,ledger_index:void 0,source_account:T,source_currencies:[{currency:"USD"}],destination_account:"r9cZA1mLK5R5Am25ArfXFmqgNwjZgnfk59",destination_amount:ripple.Amount.from_json("0.001/USD/rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B").to_json(),_description:"Find a path and estimated costs.For non-interactive use, such as automated payment sending from business integrations, ripple_path_find gives you single response that you can use immediately. However, for uses that need updated paths as new ledgers close, repeated calls becomes expensive. In those cases, when possible, use the RPC path_find in place of this API."});var L=!1;$(i).click(function(){var e=$(this).text().trim();if(!S[e])return;O(e,!0),window.location.hash=e,$(this).siblings().removeClass("selected"),$(this).addClass("selected")});var M=void 0;$(window).keydown(function(t){t.which===13&&M===17&&(t.preventDefault(),t.stopPropagation(),$(e).click()),M=t.which}),$(document.body).delegate("span.editable","blur",D),$(document.body).delegate("span.editable","keydown",function(e){e.which===13&&(e.preventDefault(),e.stopPropagation(),$(this).blur())});if(window.location.hash){var H=window.location.hash.slice(1).toLowerCase(),B=Object.keys(S),j=B.indexOf(H);if(j===-1)return;var F=$(i).eq(j);O(H),window.cmd=H,$(F).siblings().removeClass("selected"),$(F).addClass("selected")}else O("server_info");$(o).delegate("span.brace","click",q),$(o).delegate("span.bracket","click",q),$("#stream_show").click(function(){$(h).is(":visible")?($(h).hide(),$(this).text("show")):($(h).show(),$(this).text("hide"))}),$("#stream_pause").click(function(){$(this).hasClass("paused")?($(this).removeClass("paused"),$(this).text("pause"),$(h).removeClass("obscured"),L=!1):($(this).addClass("paused"),$(this).text("unpause"),$(h).addClass("obscured"),L=!0)});var R=$("#tooltip"),U=!1;$(window).mousedown(function(){U=!0}),$(window).mouseup(function(){U=!1}),$("#sign_button").click(function(){function t(){$(e).removeClass("depressed")}var e=this;$(this).addClass("depressed");var n=E.message,r=n.tx_json;if(E._signed)return t();if(!E.message.secret)return alert("Transaction account must have specified secret"),t();W.account(r.Account).get_next_sequence(function(e,i){r.Sequence=i;try{var s=W.transaction();s.tx_json=r,s._secret=n.secret,s.complete(),n.tx_blob=s.serialize().to_hex()}catch(e){return alert("Unable to sign transaction "+e.message),t()}delete n.secret,delete n.tx_json,E._signed=!0,k(E),t()})});var W=new ripple.Remote({trusted:!0,local_signing:!0,local_fee:!1,servers:[{host:"s1.ripple.com",port:443,secure:!0}]});W.on("disconnect",function(){z("disconnected")}),W.on("connect",function(){z("connected")}),$(function(){z("connecting"),W.connect(X)})})();