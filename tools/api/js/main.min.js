(function(){function n(n,r){function i(n){var s=Array.isArray(n),o=Object.keys(n),u=e[s?"open_bracket":"open_brace"],a=e[s?"close_bracket":"close_brace"],f=u;for(var l=0;l<o.length;l++){var c=o[l],h=n[c],p='<span class="field'+(s?' hidden">'+c:'">'+JSON.stringify(c))+"</span>";f+='<div class="key">'+p,s||(f+=e.colon),typeof h=="object"&&h?f+=i(h):(f+=t(h,r&&c!=="command"),l<o.length-1&&(f+=e.comma)),f+="</div>"}return f+=a,f}return typeof r!="boolean"&&(r=!0),i(n)}function r(e,t){var t=t||[],n=$(e).parent("div.key");return n.length?(t.push($(n).children(".field").text().replace(/"/g,"")),r(n,t)):t}function i(e,t,n){var r=t.length;while(--r>0)e=e[t[r]];return e[t[r]]=n,e}function s(e,t){var n=t.length;while(--n>0)console.log("Getting",e,t[n]),e=e[t[n]];return console.log("Getting",e,t[n]),e[t[n]]}function o(){return o._c}function f(e,t){var e={message:{command:e}};return Object.keys(t||{}).forEach(function(n){e.message[n]=t[n]}),e}function y(e,t){$(e).addClass("io"),t?$(p).fadeOut(100,function(){$(p).html(e),$(p).fadeIn(100)}):$(p).html(e)}function b(e,t){if(t){var n='<span class="command_name">'+a.message.command+"</span>",r='<span class="timestamp">'+(Date.now()-a.t)+"ms"+"</span>";$(v).html(n+r),$(m).removeClass("obscured"),$(h).removeClass("obscured"),$(h).html(e),++o._c}else $(d).is(":visible")||$(d).show(),$(d).prepend(e)}function w(e,t){a=u[e],a.message.id=o(),y($('<div id="json_message">').html(n(a.message)),t)}function x(e){return e.length===0||e==="undefined"||e==="void(0)"||e==="void 0"}function T(){var e=$(this).text().trim();try{var t=x(e)?void 0:JSON.parse(e);$("#invalid").hide()}catch(n){$("#invalid").show();return}var o=r($(this).parent()),u=s(a.message,o);t!==u&&($(this).text(e),i(a.message,o,t),w(a.message.command))}function N(){function e(e){var t=JSON.parse(e),r=$('<div class="result">').addClass(t.error?"error":"success").append(n(t,!1));b(r,t.id===o._c)}$(document.body).delegate("span.editable","blur",T),$(document.body).delegate("span.editable","keydown",function(e){e.which===13&&(e.preventDefault(),e.stopPropagation(),$(this).blur())}),O._get_server().on("message",e),$(m).click(function(){$(this).addClass("obscured"),$(h).addClass("obscured");var e=O.request_server_info();e.message=a.message,e.request(),a.t=Date.now()}),window.cmd&&$(m).click()}function A(e){switch(e){case C:$(g).removeClass().text("Connecting").addClass("connecting");break;case k:$(g).removeClass().text("Connected").addClass("connected");break;case L:$(g).removeClass().text("Disconnected").addClass("disconnected")}}$("#io_wrapper").height($(window).height()-300);var e={open_brace:'<span class="brace open">{</span>',close_brace:'<span class="brace close">}</span>',open_bracket:'<span class="bracket open">[</span>',close_bracket:'<span class="bracket close">]</span>',comma:'<span class="comma">,</span>',colon:'<span class="colon">:</span>'},t=function(e,t){return'<div class="val"><span class="'+typeof e+(t?' editable" contenteditable="true"':'"')+' spellcheck="false">'+JSON.stringify(e)+"</span></div>"};o._c=2;var u={},a={};u.server_info=f("server_info"),u.server_state=f("server_state"),u.ping=f("ping"),u.ledger_closed=f("ledger_closed"),u.ledger_header=f("ledger_header"),u.ledger_current=f("ledger_current"),u.ledger=f("ledger",{ledger_index:void 0,ledger_hash:void 0,full:!1,expand:!1,transactions:!0,accounts:!0}),u.ledger_entry=f("ledger_entry",{ledger_index:0,ledger_hash:void 0,type:"account_root",account_root:"rUPotLj5CNKaP4bQANcecEuT8hai3VpxfB",index:void 0,directory:void 0,generator:void 0,offer:void 0}),u.subscribe=f("subscribe",{streams:["server","server"]}),u.unsubscribe=f("unsubscribe",{streams:["server","server"]}),u.transaction_entry=f("transaction_entry",{tx_hash:"7194B78F00F011FA2E85B155E64B2107DD070A6F13B1226ECA9176D3D9D6DAD3",ledger_index:2438581,ledger_hash:void 0}),u.tx=f("tx",{transaction:"7194B78F00F011FA2E85B155E64B2107DD070A6F13B1226ECA9176D3D9D6DAD3"}),u.account_info=f("account_info",{account:"rUPotLj5CNKaP4bQANcecEuT8hai3VpxfB"}),u.account_offers=f("account_offers",{account:"rUPotLj5CNKaP4bQANcecEuT8hai3VpxfB",account_indeX:-1,ledger:"current"}),u.account_tx=f("account_tx",{account:"rUPotLj5CNKaP4bQANcecEuT8hai3VpxfB",ledger_index_min:-1,ledger_index_max:-1,binary:!1,count:!1,descending:!1,offset:0,limit:10,forward:!1,marker:void 0}),u.tx_history=f("tx_history",{start:10}),u.book_offers=f("book_offers",{gets:{currency:"XRP"},pays:{currency:"USD",issuer:"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B"}});var l=$("#input"),c=$("#output"),h=$("#response"),p=$("#request"),d=$("#status"),v=$("#info"),m=$("#try"),g=$("#online_state");$("#command_list").delegate("li","click",function(){var e=$(this).text().trim();w(e,!0),window.location.hash=e,$(this).siblings().removeClass("selected"),$(this).addClass("selected")});if(window.location.hash){var E=window.location.hash.slice(1).toLowerCase(),S=$("#cmd_"+E);if(!S.length)return;w(E),window.cmd=E,$(S).siblings().removeClass("selected"),$(S).addClass("selected")}else w("server_info");var C=1,k=2,L=3,O=new ripple.Remote({trusted:!0,local_signing:!1,local_fee:!0,servers:[{host:"s1.ripple.com",port:443,secure:!0}]});O.on("disconnect",function(){A(L)}),O.on("connect",function(){A(k)}),$(function(){A(C),O.connect(function(){var e=O.request_unsubscribe(["ledger","server"]);e.callback(N)})})})();